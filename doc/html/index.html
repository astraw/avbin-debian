<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>AVbin: Main Page</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>AVbin Documentation</h1>
<p>
To open a file and prepare it for decoding, the general procedure is<ol type=1>
<li>Initialise AVbin by calling <a class="el" href="avbin_8h.html#1195440255b10b7a3e51b3ff04c42f77">avbin_init()</a></li><li>Open a file using <a class="el" href="avbin_8h.html#3e300b6ff9cfa0047053098a1be08932">avbin_open_filename()</a></li><li>Retrieve details of the file using <a class="el" href="avbin_8h.html#59d1b37e30850f36a6896360bbb30065">avbin_file_info()</a>. The resulting <a class="el" href="struct__AVbinFileInfo.html">_AVbinFileInfo</a> structure includes details such as:<ul>
<li>Start time and duration</li><li>Number of audio and video streams</li><li>Metadata such as title, artist, etc.</li></ul>
</li><li>Examine details of each stream using <a class="el" href="avbin_8h.html#ad8080f6a77e36df17ad4358488ff42c">avbin_stream_info()</a>, passing in each stream index as an integer from 0 to n_streams. For video streams, the <a class="el" href="struct__AVbinStreamInfo.html">_AVbinStreamInfo</a> structure includes<ul>
<li>Video width and height, in pixels</li><li>Pixel aspect ratio, expressed as a fraction</li></ul>
For audio streams, the structure includes<ul>
<li>Sample rate, in Hz</li><li>Bits per sample</li><li>Channels (monoaural, stereo, or multichannel surround)</li></ul>
</li><li>For each stream you intend to decode, call <a class="el" href="avbin_8h.html#f20c30924957aa1089e6b9cf944b94b2">avbin_open_stream()</a>.</li></ol>
<p>
When all information has been determined and the streams are open, you can proceed to read and decode the file:<ol type=1>
<li>Call <a class="el" href="avbin_8h.html#ef129b5cc21f027d9ad925cf24d38447">avbin_read()</a> to read a packet of data from the file.</li><li>Examine the resulting <a class="el" href="struct__AVbinPacket.html">_AVbinPacket</a> structure for the stream_index, which indicates how the packet should be decoded. If the stream is not one that you have opened, you can discard the packet and continue with step 1 again.</li><li>To decode an audio packet, repeatedly pass the data within the packet to <a class="el" href="avbin_8h.html#4539fe5dd529d8783f98133d6a392f83">avbin_decode_audio()</a>, until there is no data left to consume or an error is returned.</li><li>To decode a video packet, pass the data within the packet to <a class="el" href="avbin_8h.html#7ed2c66eb66048f213bd0e276e676007">avbin_decode_video()</a>, which will decode a single image in RGB format.</li><li>Synchronise audio and video data by observing the <a class="el" href="struct__AVbinPacket.html#770a3216714c86198b578cc4c0381e7f">_AVbinPacket::timestamp</a> member.</li></ol>
<p>
When decoding is complete, call <a class="el" href="avbin_8h.html#286bd6ad1d7897723266ef007446c278">avbin_close_stream()</a> on each stream and <a class="el" href="avbin_8h.html#a4ba4c78a2715dd767bb53a4e1e1d71e">avbin_close_file()</a> on the open file. <hr size="1"><address style="align: right;"><small>Generated on Thu Apr 17 23:51:44 2008 for AVbin by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
